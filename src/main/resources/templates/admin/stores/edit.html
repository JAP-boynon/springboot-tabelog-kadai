<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <div th:replace="~{fragment :: meta}"></div>
    <div th:replace="~{fragment :: styles}"></div>
    <title>店舗情報編集</title>
</head>

<body>

<div th:replace="~{fragment :: header}"></div>

<main class="container pt-4 pb-5">
    <div class="row justify-content-center">
        <div class="col-xl-6 col-lg-7 col-md-9">

            <!-- パンくず -->
            <nav class="mb-4" aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a th:href="@{/admin/stores}">店舗一覧</a>
                    </li>
                    <li class="breadcrumb-item">
                        <a th:href="@{/admin/stores/{id}(id=${storeEditForm.id})}">
                            店舗詳細
                        </a>
                    </li>
                    <li class="breadcrumb-item active">店舗情報編集</li>
                </ol>
            </nav>

            <h1 class="mb-4 text-center">店舗情報編集</h1>

            <form method="post"
                  th:action="@{/admin/stores/{id}/update(id=${storeEditForm.id})}"
                  th:object="${storeEditForm}"
                  enctype="multipart/form-data">

                <!-- id（hidden） -->
                <input type="hidden" th:field="*{id}">

                <!-- 店舗名 -->
                <div class="mb-3">
                    <label class="form-label fw-bold">店舗名</label>
                    <div th:if="${#fields.hasErrors('name')}"
                         class="text-danger small"
                         th:errors="*{name}"></div>
                    <input type="text" class="form-control" th:field="*{name}">
                </div>

                <!-- カテゴリ -->
                <div class="mb-3">
                    <label class="form-label fw-bold">カテゴリ</label>
                    <div th:if="${#fields.hasErrors('categoryName')}"
                         class="text-danger small"
                         th:errors="*{categoryName}"></div>
                    <input type="text" class="form-control" th:field="*{categoryName}">
                </div>

                <!-- 画像 -->
                <div class="mb-3">
                    <label class="form-label fw-bold">店舗画像</label>
                    <input type="file" class="form-control" th:field="*{imageFile}">
                </div>

                <!-- 現在の画像 -->
                <div th:if="${imageName}" class="mb-3">
                    <img th:src="@{/storage/{file}(file=${imageName})}"
                         style="width:100%; max-height:220px; object-fit:cover;">
                </div>

                <!-- 価格 -->
                <div class="mb-3">
                    <label class="form-label fw-bold">価格（円）</label>
                    <div th:if="${#fields.hasErrors('price')}"
                         class="text-danger small"
                         th:errors="*{price}"></div>
                    <input type="number" class="form-control" th:field="*{price}">
                </div>

                <!-- 説明 -->
                <div class="mb-3">
                    <label class="form-label fw-bold">説明</label>
                    <div th:if="${#fields.hasErrors('description')}"
                         class="text-danger small"
                         th:errors="*{description}"></div>
                    <textarea class="form-control" rows="4" th:field="*{description}"></textarea>
                </div>

                <!-- 営業時間 -->
                <div class="mb-3">
                    <label class="form-label fw-bold">営業時間</label>
                    <input type="text" class="form-control" th:field="*{businessHours}">
                </div>

                <!-- 定休日 -->
                <div class="mb-3">
                    <label class="form-label fw-bold">定休日</label>
                    <input type="text" class="form-control" th:field="*{regularHoliday}">
                </div>

                <!-- 郵便番号 -->
                <div class="mb-3">
                    <label class="form-label fw-bold">郵便番号</label>
                    <input type="text" class="form-control" th:field="*{postalCode}">
                </div>

                <!-- 住所 -->
                <div class="mb-3">
                    <label class="form-label fw-bold">住所</label>
                    <input type="text" class="form-control" th:field="*{address}">
                </div>

                <!-- 電話番号 -->
                <div class="mb-4">
                    <label class="form-label fw-bold">電話番号</label>
                    <input type="text" class="form-control" th:field="*{phoneNumber}">
                </div>

                <div class="d-flex justify-content-center">
                    <button type="submit" class="btn btn-primary w-50">
                        更新
                    </button>
                </div>

            </form>

        </div>
    </div>
</main>

<div th:replace="~{fragment :: footer}"></div>
<div th:replace="~{fragment :: scripts}"></div>

</body>
</html>